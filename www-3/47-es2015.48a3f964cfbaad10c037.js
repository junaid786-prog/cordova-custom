(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{UF6s:function(e,t,n){"use strict";n.r(t);var l=n("8Y7J"),i=n("mrSG"),r=n("ZZ/e"),o=n("mHRm"),s=n("OUMn");class u{constructor(e,t,n,l,r){this.translate=e,this.reminder=t,this.popupCtrl=n,this.zone=l,this.platform=r,this.waterReminderOn=!1,this.dow="--",this.fromTimeStr="--",this.toTimeStr="--",this.time="--",this.period="--",this.addingReminder=!1,this.viewDidEnter=!1,this.setDOW=e=>{switch(e){case o.a.Everyday:this.dow=this.everyday,this.dowValue=o.a.Everyday;break;case o.a.MonToFri:this.dow=this.mon2fri,this.dowValue=o.a.MonToFri;break;case o.a.MonToSat:this.dow=this.mon2sat,this.dowValue=o.a.MonToSat}this.updateSettings()},this.setTime=(e,t)=>{t<e||(this.fromTime=e,this.toTime=t,this.time=("0"+this.fromTime).slice(-2)+":00-"+("0"+this.toTime).slice(-2)+":59",this.updateSettings())},this.setFromTime=e=>{this.zone.run(()=>{this.fromTime=e,this.fromTimeStr=("0"+Math.floor(this.fromTime/60)).slice(-2)+":"+("0"+this.fromTime%60).slice(-2),this.updateSettings()})},this.setToTime=e=>{this.zone.run(()=>{this.toTime=e,this.toTimeStr=("0"+Math.floor(this.toTime/60)).slice(-2)+":"+("0"+this.toTime%60).slice(-2),this.updateSettings()})},this.setPeriod=e=>{this.zone.run(()=>{this.periodValue=e,this.period=this.translate.instant("water-reminder.every")+" "+this.periodValue+" "+this.translate.instant("water-reminder.mins"),this.updateSettings()})},this.setSoundType=e=>{this.soundType=e,e==o.c.Speech?this.reminderMethod="voice":e==o.c.Effect&&(this.reminderMethod="beep"),this.updateSettings()},this.enableBtnClick=()=>i.b(this,void 0,void 0,(function*(){this.viewDidEnter&&(this.addingReminder=!0,yield this.reminder.removeReminder(o.d.DrinkWater),this.waterReminderOn&&(yield this.reminder.addReminder(o.d.DrinkWater)),this.addingReminder=!1)})),this.dowClicked=()=>i.b(this,void 0,void 0,(function*(){let e=[this.everyday,this.mon2fri,this.mon2sat];this.platform.is("ios")&&(e=[this.everyday]);let t=[];t.push({name:"dow",options:this.popupCtrl.getColumnOptions(e),selectedIndex:this.popupCtrl.getSelectedIndex(e,this.dow)}),this.popupCtrl.presentNativePickerController(t,e=>i.b(this,void 0,void 0,(function*(){try{switch(this.zone.run(()=>{this.dow=e[0].description}),this.dow){case this.everyday:this.dowValue=o.a.Everyday;break;case this.mon2fri:this.dowValue=o.a.MonToFri;break;case this.mon2sat:this.dowValue=o.a.MonToSat}this.updateSettings()}catch(t){yield this.presentAlert(t)}})))})),this.fromTimeClick=()=>i.b(this,void 0,void 0,(function*(){const e=Array.from(new Array(24),(e,t)=>t),t=["00","30"];let n=[];n.push({name:"hour",options:this.popupCtrl.getColumnOptions(e),selectedIndex:this.popupCtrl.getSelectedIndex(e,Math.floor(this.fromTime/60))}),n.push({name:"colon",options:this.popupCtrl.getColumnOptions([":"]),selectedIndex:0}),n.push({name:"minute",options:this.popupCtrl.getColumnOptions(t),selectedIndex:this.popupCtrl.getSelectedIndex(t,this.fromTime%60)}),this.popupCtrl.presentNativePickerController(n,e=>i.b(this,void 0,void 0,(function*(){try{const t=60*Number(e[0].description)+Number(e[2].description);this.setFromTime(t)}catch(t){yield this.presentAlert(t)}})))})),this.toTimeClick=()=>i.b(this,void 0,void 0,(function*(){const e=Array.from(new Array(24),(e,t)=>t),t=["00","30"];let n=[];n.push({name:"hour",options:this.popupCtrl.getColumnOptions(e),selectedIndex:this.popupCtrl.getSelectedIndex(e,Math.floor(this.toTime/60))}),n.push({name:"colon",options:this.popupCtrl.getColumnOptions([":"]),selectedIndex:0}),n.push({name:"minute",options:this.popupCtrl.getColumnOptions(t),selectedIndex:this.popupCtrl.getSelectedIndex(t,this.toTime%60)}),this.popupCtrl.presentNativePickerController(n,e=>i.b(this,void 0,void 0,(function*(){try{const t=60*Number(e[0].description)+Number(e[2].description);this.setToTime(t)}catch(t){yield this.presentAlert(t)}})))})),this.everyClicked=()=>i.b(this,void 0,void 0,(function*(){const e=Array.from(new Array(10),(e,t)=>30*(t+1));let t=[];t.push({name:"every",options:this.popupCtrl.getColumnOptions(e),selectedIndex:this.popupCtrl.getSelectedIndex(e,this.periodValue)}),this.popupCtrl.presentNativePickerController(t,e=>i.b(this,void 0,void 0,(function*(){try{const t=Number(e[0].description);this.setPeriod(t)}catch(t){yield this.presentAlert(t)}})))})),this.updateSettings=()=>i.b(this,void 0,void 0,(function*(){try{this.viewDidEnter&&(yield this.reminder.updateSettings(o.d.DrinkWater,this.dowValue,this.fromTime,this.toTime,this.periodValue,this.soundType))}catch(e){console.log(e)}})),this.presentAlert=e=>i.b(this,void 0,void 0,(function*(){try{yield this.popupCtrl.presentAlertController({header:this.translate.instant("global.error"),message:e.message,buttons:[{text:this.translate.instant("global.okay")}]},!0)}catch(e){console.log(e)}})),this.reminderMethodDidChange=e=>{"beep"==this.reminderMethod?this.soundType=o.c.Effect:"voice"==this.reminderMethod&&(this.soundType=o.c.Speech),this.updateSettings()}}ngOnInit(){}ionViewWillEnter(){this.everyday=this.translate.instant("water-reminder.everyday"),this.mon2fri=this.translate.instant("water-reminder.mon-fri"),this.mon2sat=this.translate.instant("water-reminder.mon-sat"),this.hours=this.translate.instant("water-reminder.hours"),this.waterReminderOn=this.reminder.isWaterReminderActivated();let e=this.reminder.queryReminder(o.d.DrinkWater);this.dowValue=e.dow,this.fromTime=e.fromTime,this.toTime=e.toTime,this.periodValue=e.period,this.soundType=e.soundType,this.setDOW(this.dowValue),this.setFromTime(this.fromTime),this.setToTime(this.toTime),this.setPeriod(this.periodValue),this.setSoundType(this.soundType)}ionViewDidEnter(){this.viewDidEnter=!0}ionViewWillLeave(){}}class a{}var d=n("pMnS"),h=n("oBZk"),b=n("TSSN"),c=n("s7LF"),m=l.Ab({encapsulation:0,styles:[['.intro-text-container[_ngcontent-%COMP%]{text-align:center;padding:1rem .5rem 1.5rem;position:relative;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;margin-bottom:1rem}.intro-text-container[_ngcontent-%COMP%]::before{content:"";background-image:url(water-reminder-banner.62daf4fb3e4aff77225c.png);background-size:cover;position:absolute;top:0;right:0;bottom:0;left:0;opacity:.5}.intro-text[_ngcontent-%COMP%]{color:var(--solos-color-a);position:relative}']],data:{}});function p(e){return l.Xb(0,[(e()(),l.Cb(0,0,null,null,12,"ion-header",[["style","background: var(--solos-color-b);"]],null,null,null,h.Q,h.i)),l.Bb(1,49152,null,0,r.D,[l.j,l.p,l.F],null,null),(e()(),l.Cb(2,0,null,0,10,"ion-toolbar",[["class","settings-header-background"],["mode","ios"]],null,null,null,h.ob,h.G)),l.Bb(3,49152,null,0,r.Db,[l.j,l.p,l.F],{mode:[0,"mode"]},null),(e()(),l.Cb(4,0,null,0,4,"ion-buttons",[["slot","start"]],null,null,null,h.L,h.d)),l.Bb(5,49152,null,0,r.n,[l.j,l.p,l.F],null,null),(e()(),l.Cb(6,0,null,0,2,"ion-back-button",[["class","settings-back-button"],["text",""]],null,[[null,"click"]],(function(e,t,n){var i=!0;return"click"===t&&(i=!1!==l.Ob(e,8).onClick(n)&&i),i}),h.J,h.b)),l.Bb(7,49152,null,0,r.i,[l.j,l.p,l.F],{text:[0,"text"]},null),l.Bb(8,16384,null,0,r.j,[[2,r.jb],r.Jb],null,null),(e()(),l.Cb(9,0,null,0,3,"ion-title",[["class","settings-header-title"]],null,null,null,h.mb,h.E)),l.Bb(10,49152,null,0,r.Bb,[l.j,l.p,l.F],null,null),(e()(),l.Vb(11,0,["",""])),l.Pb(131072,b.j,[b.k,l.j]),(e()(),l.Cb(13,0,null,null,96,"ion-content",[["class","settings-background"]],null,null,null,h.O,h.g)),l.Bb(14,49152,null,0,r.w,[l.j,l.p,l.F],null,null),(e()(),l.Cb(15,0,null,0,3,"div",[["class","intro-text-container"]],null,null,null,null,null)),(e()(),l.Cb(16,0,null,null,2,"div",[["class","intro-text"]],null,null,null,null,null)),(e()(),l.Vb(17,null,["",""])),l.Pb(131072,b.j,[b.k,l.j]),(e()(),l.Cb(19,0,null,0,90,"div",[["class","body-div"]],null,null,null,null,null)),(e()(),l.Cb(20,0,null,null,89,"ion-list",[["class","settings-body settings-div "]],null,null,null,h.Z,h.q)),l.Bb(21,49152,null,0,r.Q,[l.j,l.p,l.F],null,null),(e()(),l.Cb(22,0,null,0,12,"ion-item",[["class","settings-item"]],null,null,null,h.W,h.o)),l.Bb(23,49152,null,0,r.J,[l.j,l.p,l.F],null,null),(e()(),l.Cb(24,0,null,0,3,"ion-label",[["color","settings-left-label"]],null,null,null,h.X,h.p)),l.Bb(25,49152,null,0,r.P,[l.j,l.p,l.F],{color:[0,"color"]},null),(e()(),l.Vb(26,0,["",""])),l.Pb(131072,b.j,[b.k,l.j]),(e()(),l.Cb(28,0,null,0,6,"ion-toggle",[["class","item-toggle"],["color","solos-color-d"],["mode","md"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionChange"],[null,"ngModelChange"],[null,"ionBlur"]],(function(e,t,n){var i=!0,r=e.component;return"ionBlur"===t&&(i=!1!==l.Ob(e,29)._handleBlurEvent(n.target)&&i),"ionChange"===t&&(i=!1!==l.Ob(e,29)._handleIonChange(n.target)&&i),"ionChange"===t&&(i=!1!==r.enableBtnClick()&&i),"ngModelChange"===t&&(i=!1!==(r.waterReminderOn=n)&&i),i}),h.nb,h.F)),l.Bb(29,16384,null,0,r.d,[l.p],null,null),l.Sb(1024,null,c.c,(function(e){return[e]}),[r.d]),l.Bb(31,671744,null,0,c.h,[[8,null],[8,null],[8,null],[6,c.c]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),l.Sb(2048,null,c.d,null,[c.h]),l.Bb(33,16384,null,0,c.e,[[4,c.d]],null,null),l.Bb(34,49152,null,0,r.Cb,[l.j,l.p,l.F],{color:[0,"color"],disabled:[1,"disabled"],mode:[2,"mode"]},null),(e()(),l.Cb(35,0,null,0,5,"ion-list-header",[["class","settings-item-header"]],null,null,null,h.Y,h.r)),l.Bb(36,49152,null,0,r.R,[l.j,l.p,l.F],null,null),(e()(),l.Cb(37,0,null,0,3,"ion-label",[],null,null,null,h.X,h.p)),l.Bb(38,49152,null,0,r.P,[l.j,l.p,l.F],null,null),(e()(),l.Vb(39,0,["",""])),l.Pb(131072,b.j,[b.k,l.j]),(e()(),l.Cb(41,0,null,0,8,"ion-item",[["button",""],["class","settings-item"],["detail",""]],null,[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.dowClicked()&&l),l}),h.W,h.o)),l.Bb(42,49152,null,0,r.J,[l.j,l.p,l.F],{button:[0,"button"],detail:[1,"detail"],disabled:[2,"disabled"]},null),(e()(),l.Cb(43,0,null,0,3,"ion-label",[["color","settings-left-label"]],null,null,null,h.X,h.p)),l.Bb(44,49152,null,0,r.P,[l.j,l.p,l.F],{color:[0,"color"]},null),(e()(),l.Vb(45,0,["",""])),l.Pb(131072,b.j,[b.k,l.j]),(e()(),l.Cb(47,0,null,0,2,"ion-label",[["class","ion-text-right"],["color","settings-right-label"]],null,null,null,h.X,h.p)),l.Bb(48,49152,null,0,r.P,[l.j,l.p,l.F],{color:[0,"color"]},null),(e()(),l.Vb(49,0,["",""])),(e()(),l.Cb(50,0,null,0,8,"ion-item",[["button",""],["class","settings-item"],["detail",""]],null,[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.fromTimeClick()&&l),l}),h.W,h.o)),l.Bb(51,49152,null,0,r.J,[l.j,l.p,l.F],{button:[0,"button"],detail:[1,"detail"],disabled:[2,"disabled"]},null),(e()(),l.Cb(52,0,null,0,3,"ion-label",[["color","settings-left-label"]],null,null,null,h.X,h.p)),l.Bb(53,49152,null,0,r.P,[l.j,l.p,l.F],{color:[0,"color"]},null),(e()(),l.Vb(54,0,["",""])),l.Pb(131072,b.j,[b.k,l.j]),(e()(),l.Cb(56,0,null,0,2,"ion-label",[["class","ion-text-right"],["color","settings-right-label"]],null,null,null,h.X,h.p)),l.Bb(57,49152,null,0,r.P,[l.j,l.p,l.F],{color:[0,"color"]},null),(e()(),l.Vb(58,0,["",""])),(e()(),l.Cb(59,0,null,0,8,"ion-item",[["button",""],["class","settings-item"],["detail",""]],null,[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.toTimeClick()&&l),l}),h.W,h.o)),l.Bb(60,49152,null,0,r.J,[l.j,l.p,l.F],{button:[0,"button"],detail:[1,"detail"],disabled:[2,"disabled"]},null),(e()(),l.Cb(61,0,null,0,3,"ion-label",[["color","settings-left-label"]],null,null,null,h.X,h.p)),l.Bb(62,49152,null,0,r.P,[l.j,l.p,l.F],{color:[0,"color"]},null),(e()(),l.Vb(63,0,["",""])),l.Pb(131072,b.j,[b.k,l.j]),(e()(),l.Cb(65,0,null,0,2,"ion-label",[["class","ion-text-right"],["color","settings-right-label"]],null,null,null,h.X,h.p)),l.Bb(66,49152,null,0,r.P,[l.j,l.p,l.F],{color:[0,"color"]},null),(e()(),l.Vb(67,0,["",""])),(e()(),l.Cb(68,0,null,0,8,"ion-item",[["button",""],["class","settings-item"],["detail",""]],null,[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.everyClicked()&&l),l}),h.W,h.o)),l.Bb(69,49152,null,0,r.J,[l.j,l.p,l.F],{button:[0,"button"],detail:[1,"detail"],disabled:[2,"disabled"]},null),(e()(),l.Cb(70,0,null,0,3,"ion-label",[["color","settings-left-label"]],null,null,null,h.X,h.p)),l.Bb(71,49152,null,0,r.P,[l.j,l.p,l.F],{color:[0,"color"]},null),(e()(),l.Vb(72,0,["",""])),l.Pb(131072,b.j,[b.k,l.j]),(e()(),l.Cb(74,0,null,0,2,"ion-label",[["class","ion-text-right"],["color","settings-right-label"]],null,null,null,h.X,h.p)),l.Bb(75,49152,null,0,r.P,[l.j,l.p,l.F],{color:[0,"color"]},null),(e()(),l.Vb(76,0,["",""])),(e()(),l.Cb(77,0,null,0,5,"ion-list-header",[["class","settings-item-header"]],null,null,null,h.Y,h.r)),l.Bb(78,49152,null,0,r.R,[l.j,l.p,l.F],null,null),(e()(),l.Cb(79,0,null,0,3,"ion-label",[],null,null,null,h.X,h.p)),l.Bb(80,49152,null,0,r.P,[l.j,l.p,l.F],null,null),(e()(),l.Vb(81,0,["",""])),l.Pb(131072,b.j,[b.k,l.j]),(e()(),l.Cb(83,0,null,0,26,"ion-item",[["class","settings-item"]],null,null,null,h.W,h.o)),l.Bb(84,49152,null,0,r.J,[l.j,l.p,l.F],{disabled:[0,"disabled"]},null),(e()(),l.Cb(85,0,null,0,3,"ion-label",[["color","settings-left-label"]],null,null,null,h.X,h.p)),l.Bb(86,49152,null,0,r.P,[l.j,l.p,l.F],{color:[0,"color"]},null),(e()(),l.Vb(87,0,["",""])),l.Pb(131072,b.j,[b.k,l.j]),(e()(),l.Cb(89,0,null,0,20,"ion-item",[["class","settings-right-segment-buttons"],["lines","none"]],null,null,null,h.W,h.o)),l.Bb(90,49152,null,0,r.J,[l.j,l.p,l.F],{lines:[0,"lines"]},null),(e()(),l.Cb(91,0,null,0,18,"ion-segment",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionChange"],[null,"ngModelChange"],[null,"ionBlur"]],(function(e,t,n){var i=!0,r=e.component;return"ionBlur"===t&&(i=!1!==l.Ob(e,92)._handleBlurEvent(n.target)&&i),"ionChange"===t&&(i=!1!==l.Ob(e,92)._handleChangeEvent(n.target)&&i),"ionChange"===t&&(i=!1!==r.reminderMethodDidChange(n)&&i),"ngModelChange"===t&&(i=!1!==(r.reminderMethod=n)&&i),i}),h.hb,h.y)),l.Bb(92,16384,null,0,r.Pb,[l.p],null,null),l.Sb(1024,null,c.c,(function(e){return[e]}),[r.Pb]),l.Bb(94,671744,null,0,c.h,[[8,null],[8,null],[8,null],[6,c.c]],{model:[0,"model"]},{update:"ngModelChange"}),l.Sb(2048,null,c.d,null,[c.h]),l.Bb(96,16384,null,0,c.e,[[4,c.d]],null,null),l.Bb(97,49152,null,0,r.mb,[l.j,l.p,l.F],null,null),(e()(),l.Cb(98,0,null,0,5,"ion-segment-button",[["class","settings-segment-button"],["mode","ios"],["value","voice"]],null,null,null,h.gb,h.z)),l.Bb(99,49152,null,0,r.nb,[l.j,l.p,l.F],{mode:[0,"mode"],value:[1,"value"]},null),(e()(),l.Cb(100,0,null,0,3,"ion-label",[],null,null,null,h.X,h.p)),l.Bb(101,49152,null,0,r.P,[l.j,l.p,l.F],null,null),(e()(),l.Vb(102,0,["",""])),l.Pb(131072,b.j,[b.k,l.j]),(e()(),l.Cb(104,0,null,0,5,"ion-segment-button",[["class","settings-segment-button"],["mode","ios"],["value","beep"]],null,null,null,h.gb,h.z)),l.Bb(105,49152,null,0,r.nb,[l.j,l.p,l.F],{mode:[0,"mode"],value:[1,"value"]},null),(e()(),l.Cb(106,0,null,0,3,"ion-label",[],null,null,null,h.X,h.p)),l.Bb(107,49152,null,0,r.P,[l.j,l.p,l.F],null,null),(e()(),l.Vb(108,0,["",""])),l.Pb(131072,b.j,[b.k,l.j])],(function(e,t){var n=t.component;e(t,3,0,"ios"),e(t,7,0,""),e(t,25,0,"settings-left-label"),e(t,31,0,n.addingReminder,n.waterReminderOn),e(t,34,0,"solos-color-d",n.addingReminder,"md"),e(t,42,0,"","",n.waterReminderOn),e(t,44,0,"settings-left-label"),e(t,48,0,"settings-right-label"),e(t,51,0,"","",n.waterReminderOn),e(t,53,0,"settings-left-label"),e(t,57,0,"settings-right-label"),e(t,60,0,"","",n.waterReminderOn),e(t,62,0,"settings-left-label"),e(t,66,0,"settings-right-label"),e(t,69,0,"","",n.waterReminderOn),e(t,71,0,"settings-left-label"),e(t,75,0,"settings-right-label"),e(t,84,0,n.waterReminderOn),e(t,86,0,"settings-left-label"),e(t,90,0,"none"),e(t,94,0,n.reminderMethod),e(t,99,0,"ios","voice"),e(t,105,0,"ios","beep")}),(function(e,t){var n=t.component;e(t,11,0,l.Wb(t,11,0,l.Ob(t,12).transform("water-reminder.title"))),e(t,17,0,l.Wb(t,17,0,l.Ob(t,18).transform("water-reminder.intro"))),e(t,26,0,l.Wb(t,26,0,l.Ob(t,27).transform("water-reminder.enable"))),e(t,28,0,l.Ob(t,33).ngClassUntouched,l.Ob(t,33).ngClassTouched,l.Ob(t,33).ngClassPristine,l.Ob(t,33).ngClassDirty,l.Ob(t,33).ngClassValid,l.Ob(t,33).ngClassInvalid,l.Ob(t,33).ngClassPending),e(t,39,0,l.Wb(t,39,0,l.Ob(t,40).transform("water-reminder.schedule"))),e(t,45,0,l.Wb(t,45,0,l.Ob(t,46).transform("water-reminder.day-of-week"))),e(t,49,0,n.dow),e(t,54,0,l.Wb(t,54,0,l.Ob(t,55).transform("water-reminder.wakeup-time"))),e(t,58,0,n.fromTimeStr),e(t,63,0,l.Wb(t,63,0,l.Ob(t,64).transform("water-reminder.sleep-time"))),e(t,67,0,n.toTimeStr),e(t,72,0,l.Wb(t,72,0,l.Ob(t,73).transform("water-reminder.interval"))),e(t,76,0,n.period),e(t,81,0,l.Wb(t,81,0,l.Ob(t,82).transform("water-reminder.notification"))),e(t,87,0,l.Wb(t,87,0,l.Ob(t,88).transform("monitoring.reminder-method"))),e(t,91,0,l.Ob(t,96).ngClassUntouched,l.Ob(t,96).ngClassTouched,l.Ob(t,96).ngClassPristine,l.Ob(t,96).ngClassDirty,l.Ob(t,96).ngClassValid,l.Ob(t,96).ngClassInvalid,l.Ob(t,96).ngClassPending),e(t,102,0,l.Wb(t,102,0,l.Ob(t,103).transform("monitoring.voice"))),e(t,108,0,l.Wb(t,108,0,l.Ob(t,109).transform("monitoring.beep")))}))}function g(e){return l.Xb(0,[(e()(),l.Cb(0,0,null,null,1,"app-drink-water-reminder",[],null,null,null,p,m)),l.Bb(1,114688,null,0,u,[b.k,o.b,s.a,l.F,r.Mb],null,null)],(function(e,t){e(t,1,0)}),null)}var f=l.yb("app-drink-water-reminder",u,g,{},{},[]),C=n("SVse"),v=n("iInd");n.d(t,"DrinkWaterReminderPageModuleNgFactory",(function(){return y}));var y=l.zb(a,[],(function(e){return l.Lb([l.Mb(512,l.m,l.kb,[[8,[d.a,f]],[3,l.m],l.D]),l.Mb(4608,C.n,C.m,[l.z,[2,C.z]]),l.Mb(4608,c.j,c.j,[]),l.Mb(4608,r.c,r.c,[l.F,l.g]),l.Mb(4608,r.Ib,r.Ib,[r.c,l.m,l.w]),l.Mb(4608,r.Nb,r.Nb,[r.c,l.m,l.w]),l.Mb(4608,b.g,b.f,[]),l.Mb(4608,b.c,b.e,[]),l.Mb(4608,b.i,b.d,[]),l.Mb(4608,b.b,b.a,[]),l.Mb(4608,b.k,b.k,[b.l,b.g,b.c,b.i,b.b,b.m,b.n]),l.Mb(1073742336,C.b,C.b,[]),l.Mb(1073742336,c.i,c.i,[]),l.Mb(1073742336,c.b,c.b,[]),l.Mb(1073742336,r.Fb,r.Fb,[]),l.Mb(1073742336,b.h,b.h,[]),l.Mb(1073742336,v.o,v.o,[[2,v.t],[2,v.m]]),l.Mb(1073742336,a,a,[]),l.Mb(256,b.n,void 0,[]),l.Mb(256,b.m,void 0,[]),l.Mb(1024,v.k,(function(){return[[{path:"",component:u}]]}),[])])}))},mHRm:function(e,t,n){"use strict";n.d(t,"d",(function(){return u})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return c}));var l=n("mrSG"),i=n("ZZ/e"),r=n("8Y7J"),o=n("xgBC"),s=n("TSSN"),u=function(e){return e[e.DrinkWater=1]="DrinkWater",e}({}),a=function(e){return e[e.Speech=0]="Speech",e[e.Effect=1]="Effect",e}({}),d=function(e){return e[e.Everyday=0]="Everyday",e[e.MonToFri=1]="MonToFri",e[e.MonToSat=2]="MonToSat",e}({});const h="ReminderTypeDrinkWater",b="ReminderTypeDrinkWaterSettingsV2";let c=(()=>{class e{constructor(e,t,n){this.platform=e,this.storage=t,this.translate=n,this.waterReminderSettings=null,this.isWaterReminderOn=!1,this.addReminder=e=>l.b(this,void 0,void 0,(function*(){try{if(e==u.DrinkWater){if(1==this.isWaterReminderOn)return;let t=this.getReminderIdListFromToken(e,this.waterReminderSettings);const n=this.platform.is("ios")?"file://assets/sound/normal-beep.mp3":"res://normal_beep",l="effectChannel";let i="",r="";"zh-hant-hk"==this.translate.currentLang?(i=this.platform.is("ios")?"file://assets/sound/drink_water_reminder_cantonese.mp3":"res://drink_water_reminder_cantonese",r="hkChannel"):"zh-hant"==this.translate.currentLang||"zh-hans"==this.translate.currentLang?(i=this.platform.is("ios")?"file://assets/sound/drink_water_reminder_schi.mp3":"res://drink_water_reminder_schi",r="zhChannel"):(i=this.platform.is("ios")?"file://assets/sound/drink_water_reminder.mp3":"res://drink_water_reminder",r="enChannel");for(let e of t){const t=e.soundType==a.Effect?n:i,o=e.soundType==a.Effect?l:r;cordova.plugins.notification.local.schedule({id:e.id,title:this.translate.instant("solos-air.solos-air"),text:this.translate.instant("ai-care.drink-water-prompt-message"),sound:t,channel:o,vibrate:!0,priority:2,trigger:e.trigger})}this.isWaterReminderOn=!0,yield this.storage.set(h,this.isWaterReminderOn)}}catch(t){console.log(t.message)}})),this.removeReminder=e=>l.b(this,void 0,void 0,(function*(){try{if(e==u.DrinkWater){if(0==this.isWaterReminderOn)return;let t=this.getReminderIdListFromToken(e,this.waterReminderSettings).map(e=>e.id);yield cordova.plugins.notification.local.cancel(t,()=>l.b(this,void 0,void 0,(function*(){this.isWaterReminderOn=!1,yield this.storage.set(h,this.isWaterReminderOn)})))}}catch(t){console.log(t.message)}})),this.queryReminder=e=>{let t=null;if(e==u.DrinkWater&&(t=this.waterReminderSettings),null!=t){let e,n=t.split("-"),l=parseInt(n[0],16),i=parseInt(n[1],16),r=parseInt(n[2],16),o=parseInt(n[3],16);if(127==l)e=d.Everyday;else if(126==l)e=d.MonToSat;else{if(124!=l)return null;e=d.MonToFri}return{dow:e,fromTime:i,toTime:r,period:o,soundType:a[n[4]]}}return null},this.isWaterReminderActivated=()=>this.isWaterReminderOn,this.updateSettings=(e,t,n,i,r,o)=>l.b(this,void 0,void 0,(function*(){try{e==u.DrinkWater&&(this.waterReminderSettings=this.getTokenFromReminder(t,n,i,r,o),yield this.storage.set(b,this.waterReminderSettings))}catch(l){console.log(l)}})),this.platform.ready().then(()=>l.b(this,void 0,void 0,(function*(){try{let e=yield this.storage.get(h);null!=e&&(this.isWaterReminderOn=e),this.waterReminderSettings=yield this.storage.get(b),null==this.waterReminderSettings?this.platform.is("ios")?this.updateSettings(u.DrinkWater,d.Everyday,420,1200,120,a.Speech):this.updateSettings(u.DrinkWater,d.MonToFri,420,1200,120,a.Speech):this.platform.is("ios")&&this.queryReminder(u.DrinkWater).dow!=d.Everyday&&(this.isWaterReminderOn&&(yield this.removeReminder(u.DrinkWater)),this.updateSettings(u.DrinkWater,d.Everyday,420,1200,120,a.Speech))}catch(e){console.log(e)}})))}getTokenFromReminder(e,t,n,l,i){let r="";return e==d.Everyday?r+=127..toString(16):e==d.MonToFri?r+=124..toString(16):e==d.MonToSat&&(r+=126..toString(16)),r+="-"+t.toString(16),r+="-"+n.toString(16),(r+="-"+l.toString(16))+"-"+a[i]}getReminderIdListFromToken(e,t){let n=t.split("-"),l=parseInt(n[0],16),i=parseInt(n[1],16),r=parseInt(n[2],16);r<=i&&(r+=1440);let o=parseInt(n[3],16),s=a[n[4]],u=[];if(127==l)for(let a=i;a<r;a+=o)u.push({id:1e5*e+8e4+a,trigger:{every:{hour:Math.floor(a/60)%24,minute:a%60}},soundType:s});else for(let a=64,d=1;a>0;d++,a>>=1)if(l&a)for(let t=i;t<r;t+=o)u.push({id:1e5*e+1e4*d+t,trigger:{every:{weekday:d,hour:Math.floor(t/60)%24,minute:t%60}},soundType:s});return u}}return e.ngInjectableDef=r.ac({factory:function(){return new e(r.bc(i.Mb),r.bc(o.b),r.bc(s.k))},token:e,providedIn:"root"}),e})()}}]);