function _createForOfIteratorHelper(l,n){var t;if("undefined"==typeof Symbol||null==l[Symbol.iterator]){if(Array.isArray(l)||(t=_unsupportedIterableToArray(l))||n&&l&&"number"==typeof l.length){t&&(l=t);var e=0,r=function(){};return{s:r,n:function(){return e>=l.length?{done:!0}:{done:!1,value:l[e++]}},e:function(l){throw l},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){t=l[Symbol.iterator]()},n:function(){var l=t.next();return i=l.done,l},e:function(l){u=!0,o=l},f:function(){try{i||null==t.return||t.return()}finally{if(u)throw o}}}}function _unsupportedIterableToArray(l,n){if(l){if("string"==typeof l)return _arrayLikeToArray(l,n);var t=Object.prototype.toString.call(l).slice(8,-1);return"Object"===t&&l.constructor&&(t=l.constructor.name),"Map"===t||"Set"===t?Array.from(l):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(l,n):void 0}}function _arrayLikeToArray(l,n){(null==n||n>l.length)&&(n=l.length);for(var t=0,e=new Array(n);t<n;t++)e[t]=l[t];return e}function _classCallCheck(l,n){if(!(l instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(l,n){for(var t=0;t<n.length;t++){var e=n[t];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(l,e.key,e)}}function _createClass(l,n,t){return n&&_defineProperties(l.prototype,n),t&&_defineProperties(l,t),l}(window.webpackJsonp=window.webpackJsonp||[]).push([[71],{sXTG:function(l,n,t){"use strict";t.r(n);var e=t("8Y7J"),r=t("mrSG"),o=t("Z18M"),i=t("ZZ/e"),u=t("lvyt"),a=t("OUMn"),s=function(){function l(n,t,e,o,i,a,s){var b=this;_classCallCheck(this,l),this.zone=n,this.route=t,this.router=e,this.backend=o,this.translate=i,this.popupCtrl=a,this.navCtrl=s,this.recordList=[],this.totalPostureCount=0,this.hourText="",this.busyLoadData=!1,this.getTotalPostureCount=function(){return r.b(b,void 0,void 0,regeneratorRuntime.mark((function l(){return regeneratorRuntime.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,l.next=3,this.backend.getTotalPMonitorStatsCount4Dates(this.fromDate,this.toDate);case 3:this.totalPostureCount=l.sent,l.next=9;break;case 6:l.prev=6,l.t0=l.catch(0),console.log(l.t0);case 9:case"end":return l.stop()}}),l,this,[[0,6]])})))},this.loadData=function(){return r.b(b,void 0,void 0,regeneratorRuntime.mark((function l(){return regeneratorRuntime.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:if(this.busyLoadData){l.next=15;break}return this.busyLoadData=!0,l.prev=2,l.next=5,this.getTotalPostureCount();case 5:return this.infiniteScroll.disabled=!1,this.recordList=[],l.next=9,this.loadMore();case 9:l.next=14;break;case 11:l.prev=11,l.t0=l.catch(2),console.log(l.t0);case 14:this.busyLoadData=!1;case 15:case"end":return l.stop()}}),l,this,[[2,11]])})))},this.loadMore=function(){var l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return r.b(b,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(this.recordList.length>0)){n.next=5;break}return n.next=3,this.getQueryRecords(this.fromDate,this.recordList[this.recordList.length-1].endTime,l);case 3:n.next=7;break;case 5:return n.next=7,this.getQueryRecords(this.fromDate,this.toDate,l);case 7:case"end":return n.stop()}}),n,this)})))},this.getQueryRecords=function(l,n){arguments.length>2&&void 0!==arguments[2]&&arguments[2];return r.b(b,void 0,void 0,regeneratorRuntime.mark((function t(){var e,r,o,i,a=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.backend.queryPMonitorRecords4Dates(l,n);case 3:if((e=t.sent).length>0){r=_createForOfIteratorHelper(e);try{for(i=function(){var l=o.value,n=l.id,t=l.getStartTime(),e=Object(u.b)(t)+" "+Object(u.a)(t),r=Object(u.d)(t),i=l.getElapsedTime(),s=Math.floor(i%60),b=Math.floor(i/60)%60,p=Math.floor(i/3600),d=l.getStatNormal(),h=l.getStatSlight(),f=l.getStatSerious(),g=l.getStatSeverse(),x=Math.round(100*d/(d+h+f+g)),m=Math.round(100*h/(d+h+f+g)),v=Math.round(100*f/(d+h+f+g)),y=Math.round(100*g/(d+h+f+g));if(x+m+v+y!=100){var C=Math.max(x,m,v,y);C==x?x+=1:C==m?m+=1:C==v?v+=1:y+=1}var k=l.getEndTime();a.zone.run((function(){a.recordList.push(new c(n,e,r,p,b,s,d,h,f,g,x,m,v,y,k))}))},r.s();!(o=r.n()).done;)i()}catch(s){r.e(s)}finally{r.f()}this.infiniteScroll.complete(),10!=e.length&&(this.infiniteScroll.disabled=!0)}else this.infiniteScroll.complete(),this.infiniteScroll.disabled=!0;this.virtualScroll.checkEnd(),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),alert(t.t0.message);case 11:case"end":return t.stop()}}),t,this,[[0,8]])})))},this.onItemClicked=function(l){return r.b(b,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:console.log("onItemClicked");try{this.navCtrl.navigateForward("/posture-summary",{state:{record:l}})}catch(t){console.log(t)}case 2:case"end":return n.stop()}}),n,this)})))},this.route.queryParams.subscribe((function(l){b.router.getCurrentNavigation().extras.state&&(b.fromDate=b.router.getCurrentNavigation().extras.state.fromDate,b.toDate=b.router.getCurrentNavigation().extras.state.toDate)}))}return _createClass(l,[{key:"ngOnInit",value:function(){this.hourText=this.translate.instant("posture-history.h")}},{key:"ionViewWillEnter",value:function(){this.loadData()}},{key:"ionViewDidEnter",value:function(){}},{key:"ionViewWillLeave",value:function(){}},{key:"ionViewDidLeave",value:function(){}}]),l}(),c=function l(n,t,e,r,o,i,u,a,s,c,b,p,d,h,f){_classCallCheck(this,l),this.id=n,this.date=t,this.time=e,this.elapsedHH=r,this.elapsedmm=o,this.elapsedss=i,this.statNormal=u,this.statSlight=a,this.statSerious=s,this.statSeverse=c,this.normalPercent=b,this.slightPercent=p,this.seriousPercent=d,this.severePercent=h,this.endTime=f},b=function l(){_classCallCheck(this,l)},p=t("pMnS"),d=t("oBZk"),h=t("TSSN"),f=t("SVse"),g=t("iInd"),x=e.Ab({encapsulation:0,styles:[["ion-item[_ngcontent-%COMP%]{--padding-end:0px;--inner-padding-end:0px}.container[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-pack:start;justify-content:flex-start;-webkit-box-align:center;align-items:center;margin-bottom:10px}.total-activities[_ngcontent-%COMP%]{color:var(--solos-color-a);font-size:16px;margin:10px;text-transform:uppercase}.card[_ngcontent-%COMP%]{width:90%;--background:var(--solos-color-b);border-radius:0;padding-bottom:10px;margin-left:auto;margin-right:auto;border:1px solid var(--solos-color-a)}.card-header[_ngcontent-%COMP%]{padding:0 15px;--min-height:0;--border-color:var(--solos-color-d);--border-width:0px 0px 1px 0px}.date[_ngcontent-%COMP%]{font-size:14px;color:var(--solos-color-a)}.time[_ngcontent-%COMP%]{font-size:14px;color:var(--solos-color-a);text-align:end}.card-body[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;padding:0 15px;margin-top:15px}.duration-text[_ngcontent-%COMP%]{font-size:20px;color:var(--solos-color-a);margin:0}.percent-bar[_ngcontent-%COMP%]{display:-webkit-box;display:flex;width:100%;height:5px;margin:5px 0}.straight-up[_ngcontent-%COMP%]{background:var(--solos-color-f);height:100%;-webkit-box-flex:0;flex:0 1}.slight[_ngcontent-%COMP%]{background:var(--solos-color-a);height:100%;-webkit-box-flex:0;flex:0 1}.serious[_ngcontent-%COMP%]{background:var(--solos-color-e);height:100%;-webkit-box-flex:0;flex:0 1}.severe[_ngcontent-%COMP%]{background:var(--solos-color-d);height:100%;-webkit-box-flex:0;flex:0 1}.percent-text[_ngcontent-%COMP%]{display:-webkit-box;display:flex;width:100%;margin-top:5px}.percent-text-cell[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-flex:1;flex-grow:1;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center}.level-text[_ngcontent-%COMP%]{color:var(--solos-color-a);font-size:14px;margin:2px 0}.straight-up-text[_ngcontent-%COMP%]{color:var(--solos-color-f)}.slight-text[_ngcontent-%COMP%]{color:var(--solos-color-a)}.serious-text[_ngcontent-%COMP%]{color:var(--solos-color-e)}.severe-text[_ngcontent-%COMP%]{color:var(--solos-color-d)}"]],data:{}});function m(l){return e.Xb(0,[(l()(),e.Cb(0,0,null,null,59,"ion-card",[["class","card"]],null,[[null,"click"]],(function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.onItemClicked(l.context.$implicit)&&e),e}),d.M,d.e)),e.Bb(1,49152,null,0,i.o,[e.j,e.p,e.F],null,null),(l()(),e.Cb(2,0,null,0,7,"ion-item",[["class","card-header"],["no-padding",""]],null,null,null,d.W,d.o)),e.Bb(3,49152,null,0,i.J,[e.j,e.p,e.F],null,null),(l()(),e.Cb(4,0,null,0,2,"ion-label",[["class","date"]],null,null,null,d.X,d.p)),e.Bb(5,49152,null,0,i.P,[e.j,e.p,e.F],null,null),(l()(),e.Vb(6,0,[" "," "])),(l()(),e.Cb(7,0,null,0,2,"ion-label",[["class","time"]],null,null,null,d.X,d.p)),e.Bb(8,49152,null,0,i.P,[e.j,e.p,e.F],null,null),(l()(),e.Vb(9,0,[" "," "])),(l()(),e.Cb(10,0,null,0,49,"div",[["class","card-body"]],null,null,null,null,null)),(l()(),e.Cb(11,0,null,null,6,"p",[["class","duration-text"]],null,null,null,null,null)),(l()(),e.Vb(12,null,[" ","",""," ",""," "])),e.Rb(13,2),e.Rb(14,2),e.Pb(131072,h.j,[h.k,e.j]),e.Rb(16,2),e.Pb(131072,h.j,[h.k,e.j]),(l()(),e.Cb(18,0,null,null,16,"div",[["class","percent-bar"]],null,null,null,null,null)),(l()(),e.Cb(19,0,null,null,3,"div",[["class","straight-up"]],null,null,null,null,null)),e.Sb(512,null,f.w,f.x,[e.p,e.y,e.L]),e.Bb(21,278528,null,0,f.o,[f.w],{ngStyle:[0,"ngStyle"]},null),e.Qb(22,{"flex-basis":0}),(l()(),e.Cb(23,0,null,null,3,"div",[["class","slight"]],null,null,null,null,null)),e.Sb(512,null,f.w,f.x,[e.p,e.y,e.L]),e.Bb(25,278528,null,0,f.o,[f.w],{ngStyle:[0,"ngStyle"]},null),e.Qb(26,{"flex-basis":0}),(l()(),e.Cb(27,0,null,null,3,"div",[["class","serious"]],null,null,null,null,null)),e.Sb(512,null,f.w,f.x,[e.p,e.y,e.L]),e.Bb(29,278528,null,0,f.o,[f.w],{ngStyle:[0,"ngStyle"]},null),e.Qb(30,{"flex-basis":0}),(l()(),e.Cb(31,0,null,null,3,"div",[["class","severe"]],null,null,null,null,null)),e.Sb(512,null,f.w,f.x,[e.p,e.y,e.L]),e.Bb(33,278528,null,0,f.o,[f.w],{ngStyle:[0,"ngStyle"]},null),e.Qb(34,{"flex-basis":0}),(l()(),e.Cb(35,0,null,null,24,"div",[["class","percent-text"]],null,null,null,null,null)),(l()(),e.Cb(36,0,null,null,5,"div",[["class","percent-text-cell"]],null,null,null,null,null)),(l()(),e.Cb(37,0,null,null,2,"p",[["class","level-text straight-up-text"]],null,null,null,null,null)),(l()(),e.Vb(38,null,["",""])),e.Pb(131072,h.j,[h.k,e.j]),(l()(),e.Cb(40,0,null,null,1,"p",[["class","level-text"]],null,null,null,null,null)),(l()(),e.Vb(41,null,["","%"])),(l()(),e.Cb(42,0,null,null,5,"div",[["class","percent-text-cell"]],null,null,null,null,null)),(l()(),e.Cb(43,0,null,null,2,"p",[["class","level-text slight-text"]],null,null,null,null,null)),(l()(),e.Vb(44,null,["",""])),e.Pb(131072,h.j,[h.k,e.j]),(l()(),e.Cb(46,0,null,null,1,"p",[["class","level-text"]],null,null,null,null,null)),(l()(),e.Vb(47,null,["","%"])),(l()(),e.Cb(48,0,null,null,5,"div",[["class","percent-text-cell"]],null,null,null,null,null)),(l()(),e.Cb(49,0,null,null,2,"p",[["class","level-text serious-text"]],null,null,null,null,null)),(l()(),e.Vb(50,null,["",""])),e.Pb(131072,h.j,[h.k,e.j]),(l()(),e.Cb(52,0,null,null,1,"p",[["class","level-text"]],null,null,null,null,null)),(l()(),e.Vb(53,null,["","%"])),(l()(),e.Cb(54,0,null,null,5,"div",[["class","percent-text-cell"]],null,null,null,null,null)),(l()(),e.Cb(55,0,null,null,2,"p",[["class","level-text severe-text"]],null,null,null,null,null)),(l()(),e.Vb(56,null,["",""])),e.Pb(131072,h.j,[h.k,e.j]),(l()(),e.Cb(58,0,null,null,1,"p",[["class","level-text"]],null,null,null,null,null)),(l()(),e.Vb(59,null,["","%"]))],(function(l,n){var t=l(n,22,0,n.context.$implicit.normalPercent+"%");l(n,21,0,t);var e=l(n,26,0,n.context.$implicit.slightPercent+"%");l(n,25,0,e);var r=l(n,30,0,n.context.$implicit.seriousPercent+"%");l(n,29,0,r);var o=l(n,34,0,n.context.$implicit.severePercent+"%");l(n,33,0,o)}),(function(l,n){var t=n.component;l(n,6,0,n.context.$implicit.date),l(n,9,0,n.context.$implicit.time);var r=0==n.context.$implicit.elapsedHH?"":e.Wb(n,12,0,l(n,13,0,e.Ob(n.parent,0),n.context.$implicit.elapsedHH,"1.0-0"))+t.hourText+" ",o=e.Wb(n,12,1,l(n,14,0,e.Ob(n.parent,0),n.context.$implicit.elapsedmm,"1.0-0")),i=e.Wb(n,12,2,e.Ob(n,15).transform("posture-history.m")),u=e.Wb(n,12,3,l(n,16,0,e.Ob(n.parent,0),n.context.$implicit.elapsedss,"1.0-0"));l(n,12,0,r,o,i,u,e.Wb(n,12,4,e.Ob(n,17).transform("posture-history.s"))),l(n,38,0,e.Wb(n,38,0,e.Ob(n,39).transform("monitoring.straight-up"))),l(n,41,0,n.context.$implicit.normalPercent),l(n,44,0,e.Wb(n,44,0,e.Ob(n,45).transform("monitoring.slight"))),l(n,47,0,n.context.$implicit.slightPercent),l(n,50,0,e.Wb(n,50,0,e.Ob(n,51).transform("monitoring.serious"))),l(n,53,0,n.context.$implicit.seriousPercent),l(n,56,0,e.Wb(n,56,0,e.Ob(n,57).transform("monitoring.severe"))),l(n,59,0,n.context.$implicit.severePercent)}))}function v(l){return e.Xb(0,[e.Pb(0,f.e,[e.z]),e.Tb(671088640,1,{virtualScroll:0}),e.Tb(671088640,2,{infiniteScroll:0}),(l()(),e.Cb(3,0,null,null,12,"ion-header",[],null,null,null,d.Q,d.i)),e.Bb(4,49152,null,0,i.D,[e.j,e.p,e.F],null,null),(l()(),e.Cb(5,0,null,0,10,"ion-toolbar",[["class","settings-header-background"],["mode","ios"]],null,null,null,d.ob,d.G)),e.Bb(6,49152,null,0,i.Db,[e.j,e.p,e.F],{mode:[0,"mode"]},null),(l()(),e.Cb(7,0,null,0,4,"ion-buttons",[["slot","start"]],null,null,null,d.L,d.d)),e.Bb(8,49152,null,0,i.n,[e.j,e.p,e.F],null,null),(l()(),e.Cb(9,0,null,0,2,"ion-back-button",[["class","settings-back-button"],["text",""]],null,[[null,"click"]],(function(l,n,t){var r=!0;return"click"===n&&(r=!1!==e.Ob(l,11).onClick(t)&&r),r}),d.J,d.b)),e.Bb(10,49152,null,0,i.i,[e.j,e.p,e.F],{text:[0,"text"]},null),e.Bb(11,16384,null,0,i.j,[[2,i.jb],i.Jb],null,null),(l()(),e.Cb(12,0,null,0,3,"ion-title",[["class","settings-header-title"]],null,null,null,d.mb,d.E)),e.Bb(13,49152,null,0,i.Bb,[e.j,e.p,e.F],null,null),(l()(),e.Vb(14,0,["",""])),e.Pb(131072,h.j,[h.k,e.j]),(l()(),e.Cb(16,0,null,null,16,"ion-content",[["class","settings-background"]],null,null,null,d.O,d.g)),e.Bb(17,49152,null,0,i.w,[e.j,e.p,e.F],null,null),(l()(),e.Cb(18,0,null,0,14,"div",[["class","container"]],null,null,null,null,null)),(l()(),e.Cb(19,0,null,null,2,"div",[["class","total-activities"]],null,null,null,null,null)),(l()(),e.Vb(20,null,[" ",""," "])),e.Pb(131072,h.j,[h.k,e.j]),(l()(),e.Cb(22,0,null,null,6,"ion-virtual-scroll",[["approxItemHeight","320px"]],null,null,null,d.pb,d.H)),e.Bb(23,835584,[[1,4],["virtualScroll",4]],3,i.Eb,[e.F,e.x,e.p],{approxItemHeight:[0,"approxItemHeight"],items:[1,"items"]},null),e.Tb(335544320,3,{itmTmp:0}),e.Tb(335544320,4,{hdrTmp:0}),e.Tb(335544320,5,{ftrTmp:0}),(l()(),e.rb(16777216,null,0,1,null,m)),e.Bb(28,16384,[[3,4]],0,i.Rb,[e.T,e.X],null,null),(l()(),e.Cb(29,0,null,null,3,"ion-infinite-scroll",[["threshold","100px"]],null,[[null,"ionInfinite"]],(function(l,n,t){var e=!0;return"ionInfinite"===n&&(e=!1!==l.component.loadMore(t)&&e),e}),d.U,d.l)),e.Bb(30,49152,[[2,4],["infiniteScroll",4]],0,i.G,[e.j,e.p,e.F],{threshold:[0,"threshold"]},null),(l()(),e.Cb(31,0,null,0,1,"ion-infinite-scroll-content",[["loadingSpinner","bubbles"]],null,null,null,d.T,d.m)),e.Bb(32,49152,null,0,i.H,[e.j,e.p,e.F],{loadingSpinner:[0,"loadingSpinner"]},null)],(function(l,n){var t=n.component;l(n,6,0,"ios"),l(n,10,0,""),l(n,23,0,"320px",t.recordList),l(n,30,0,"100px"),l(n,32,0,"bubbles")}),(function(l,n){var t=n.component;l(n,14,0,e.Wb(n,14,0,e.Ob(n,15).transform("posture-history.title"))),l(n,20,0,e.Wb(n,20,0,e.Ob(n,21).transform("posture-history.records")),t.totalPostureCount)}))}var y=e.yb("app-posture-history",s,(function(l){return e.Xb(0,[(l()(),e.Cb(0,0,null,null,1,"app-posture-history",[],null,null,null,v,x)),e.Bb(1,114688,null,0,s,[e.F,g.a,g.m,o.c,h.k,a.a,i.Jb],null,null)],(function(l,n){l(n,1,0)}),null)}),{},{},[]),C=t("s7LF");t.d(n,"PostureHistoryPageModuleNgFactory",(function(){return k}));var k=e.zb(b,[],(function(l){return e.Lb([e.Mb(512,e.m,e.kb,[[8,[p.a,y]],[3,e.m],e.D]),e.Mb(4608,f.n,f.m,[e.z,[2,f.z]]),e.Mb(4608,C.j,C.j,[]),e.Mb(4608,i.c,i.c,[e.F,e.g]),e.Mb(4608,i.Ib,i.Ib,[i.c,e.m,e.w]),e.Mb(4608,i.Nb,i.Nb,[i.c,e.m,e.w]),e.Mb(4608,h.g,h.f,[]),e.Mb(4608,h.c,h.e,[]),e.Mb(4608,h.i,h.d,[]),e.Mb(4608,h.b,h.a,[]),e.Mb(4608,h.k,h.k,[h.l,h.g,h.c,h.i,h.b,h.m,h.n]),e.Mb(1073742336,f.b,f.b,[]),e.Mb(1073742336,C.i,C.i,[]),e.Mb(1073742336,C.b,C.b,[]),e.Mb(1073742336,i.Fb,i.Fb,[]),e.Mb(1073742336,g.o,g.o,[[2,g.t],[2,g.m]]),e.Mb(1073742336,h.h,h.h,[]),e.Mb(1073742336,b,b,[]),e.Mb(1024,g.k,(function(){return[[{path:"",component:s}]]}),[]),e.Mb(256,h.n,void 0,[]),e.Mb(256,h.m,void 0,[])])}))}}]);