(window.webpackJsonp=window.webpackJsonp||[]).push([[71],{sXTG:function(l,n,t){"use strict";t.r(n);var e=t("8Y7J"),o=t("mrSG"),i=t("Z18M"),u=t("ZZ/e"),s=t("lvyt"),r=t("OUMn");class a{constructor(l,n,t,e,i,u,r){this.zone=l,this.route=n,this.router=t,this.backend=e,this.translate=i,this.popupCtrl=u,this.navCtrl=r,this.recordList=[],this.totalPostureCount=0,this.hourText="",this.busyLoadData=!1,this.getTotalPostureCount=()=>o.b(this,void 0,void 0,(function*(){try{this.totalPostureCount=yield this.backend.getTotalPMonitorStatsCount4Dates(this.fromDate,this.toDate)}catch(l){console.log(l)}})),this.loadData=()=>o.b(this,void 0,void 0,(function*(){if(!this.busyLoadData){this.busyLoadData=!0;try{yield this.getTotalPostureCount(),this.infiniteScroll.disabled=!1,this.recordList=[],yield this.loadMore()}catch(l){console.log(l)}this.busyLoadData=!1}})),this.loadMore=(l=null)=>o.b(this,void 0,void 0,(function*(){this.recordList.length>0?yield this.getQueryRecords(this.fromDate,this.recordList[this.recordList.length-1].endTime,l):yield this.getQueryRecords(this.fromDate,this.toDate,l)})),this.getQueryRecords=(l,n,t=null)=>o.b(this,void 0,void 0,(function*(){try{let t=yield this.backend.queryPMonitorRecords4Dates(l,n);if(t.length>0){for(let l of t){let n=l.id,t=l.getStartTime(),e=Object(s.b)(t)+" "+Object(s.a)(t),o=Object(s.d)(t),i=l.getElapsedTime(),u=Math.floor(i%60),r=Math.floor(i/60)%60,a=Math.floor(i/3600),b=l.getStatNormal(),d=l.getStatSlight(),p=l.getStatSerious(),h=l.getStatSeverse(),x=Math.round(100*b/(b+d+p+h)),g=Math.round(100*d/(b+d+p+h)),m=Math.round(100*p/(b+d+p+h)),v=Math.round(100*h/(b+d+p+h));if(x+g+m+v!=100){let l=Math.max(x,g,m,v);l==x?x+=1:l==g?g+=1:l==m?m+=1:v+=1}let f=l.getEndTime();this.zone.run(()=>{this.recordList.push(new c(n,e,o,a,r,u,b,d,p,h,x,g,m,v,f))})}this.infiniteScroll.complete(),10!=t.length&&(this.infiniteScroll.disabled=!0)}else this.infiniteScroll.complete(),this.infiniteScroll.disabled=!0;this.virtualScroll.checkEnd()}catch(t){alert(t.message)}})),this.onItemClicked=l=>o.b(this,void 0,void 0,(function*(){console.log("onItemClicked");try{this.navCtrl.navigateForward("/posture-summary",{state:{record:l}})}catch(n){console.log(n)}})),this.route.queryParams.subscribe(l=>{this.router.getCurrentNavigation().extras.state&&(this.fromDate=this.router.getCurrentNavigation().extras.state.fromDate,this.toDate=this.router.getCurrentNavigation().extras.state.toDate)})}ngOnInit(){this.hourText=this.translate.instant("posture-history.h")}ionViewWillEnter(){this.loadData()}ionViewDidEnter(){}ionViewWillLeave(){}ionViewDidLeave(){}}class c{constructor(l,n,t,e,o,i,u,s,r,a,c,b,d,p,h){this.id=l,this.date=n,this.time=t,this.elapsedHH=e,this.elapsedmm=o,this.elapsedss=i,this.statNormal=u,this.statSlight=s,this.statSerious=r,this.statSeverse=a,this.normalPercent=c,this.slightPercent=b,this.seriousPercent=d,this.severePercent=p,this.endTime=h}}class b{}var d=t("pMnS"),p=t("oBZk"),h=t("TSSN"),x=t("SVse"),g=t("iInd"),m=e.Ab({encapsulation:0,styles:[["ion-item[_ngcontent-%COMP%]{--padding-end:0px;--inner-padding-end:0px}.container[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-pack:start;justify-content:flex-start;-webkit-box-align:center;align-items:center;margin-bottom:10px}.total-activities[_ngcontent-%COMP%]{color:var(--solos-color-a);font-size:16px;margin:10px;text-transform:uppercase}.card[_ngcontent-%COMP%]{width:90%;--background:var(--solos-color-b);border-radius:0;padding-bottom:10px;margin-left:auto;margin-right:auto;border:1px solid var(--solos-color-a)}.card-header[_ngcontent-%COMP%]{padding:0 15px;--min-height:0;--border-color:var(--solos-color-d);--border-width:0px 0px 1px 0px}.date[_ngcontent-%COMP%]{font-size:14px;color:var(--solos-color-a)}.time[_ngcontent-%COMP%]{font-size:14px;color:var(--solos-color-a);text-align:end}.card-body[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;padding:0 15px;margin-top:15px}.duration-text[_ngcontent-%COMP%]{font-size:20px;color:var(--solos-color-a);margin:0}.percent-bar[_ngcontent-%COMP%]{display:-webkit-box;display:flex;width:100%;height:5px;margin:5px 0}.straight-up[_ngcontent-%COMP%]{background:var(--solos-color-f);height:100%;-webkit-box-flex:0;flex:0 1}.slight[_ngcontent-%COMP%]{background:var(--solos-color-a);height:100%;-webkit-box-flex:0;flex:0 1}.serious[_ngcontent-%COMP%]{background:var(--solos-color-e);height:100%;-webkit-box-flex:0;flex:0 1}.severe[_ngcontent-%COMP%]{background:var(--solos-color-d);height:100%;-webkit-box-flex:0;flex:0 1}.percent-text[_ngcontent-%COMP%]{display:-webkit-box;display:flex;width:100%;margin-top:5px}.percent-text-cell[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-flex:1;flex-grow:1;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center}.level-text[_ngcontent-%COMP%]{color:var(--solos-color-a);font-size:14px;margin:2px 0}.straight-up-text[_ngcontent-%COMP%]{color:var(--solos-color-f)}.slight-text[_ngcontent-%COMP%]{color:var(--solos-color-a)}.serious-text[_ngcontent-%COMP%]{color:var(--solos-color-e)}.severe-text[_ngcontent-%COMP%]{color:var(--solos-color-d)}"]],data:{}});function v(l){return e.Xb(0,[(l()(),e.Cb(0,0,null,null,59,"ion-card",[["class","card"]],null,[[null,"click"]],(function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.onItemClicked(l.context.$implicit)&&e),e}),p.M,p.e)),e.Bb(1,49152,null,0,u.o,[e.j,e.p,e.F],null,null),(l()(),e.Cb(2,0,null,0,7,"ion-item",[["class","card-header"],["no-padding",""]],null,null,null,p.W,p.o)),e.Bb(3,49152,null,0,u.J,[e.j,e.p,e.F],null,null),(l()(),e.Cb(4,0,null,0,2,"ion-label",[["class","date"]],null,null,null,p.X,p.p)),e.Bb(5,49152,null,0,u.P,[e.j,e.p,e.F],null,null),(l()(),e.Vb(6,0,[" "," "])),(l()(),e.Cb(7,0,null,0,2,"ion-label",[["class","time"]],null,null,null,p.X,p.p)),e.Bb(8,49152,null,0,u.P,[e.j,e.p,e.F],null,null),(l()(),e.Vb(9,0,[" "," "])),(l()(),e.Cb(10,0,null,0,49,"div",[["class","card-body"]],null,null,null,null,null)),(l()(),e.Cb(11,0,null,null,6,"p",[["class","duration-text"]],null,null,null,null,null)),(l()(),e.Vb(12,null,[" ","",""," ",""," "])),e.Rb(13,2),e.Rb(14,2),e.Pb(131072,h.j,[h.k,e.j]),e.Rb(16,2),e.Pb(131072,h.j,[h.k,e.j]),(l()(),e.Cb(18,0,null,null,16,"div",[["class","percent-bar"]],null,null,null,null,null)),(l()(),e.Cb(19,0,null,null,3,"div",[["class","straight-up"]],null,null,null,null,null)),e.Sb(512,null,x.w,x.x,[e.p,e.y,e.L]),e.Bb(21,278528,null,0,x.o,[x.w],{ngStyle:[0,"ngStyle"]},null),e.Qb(22,{"flex-basis":0}),(l()(),e.Cb(23,0,null,null,3,"div",[["class","slight"]],null,null,null,null,null)),e.Sb(512,null,x.w,x.x,[e.p,e.y,e.L]),e.Bb(25,278528,null,0,x.o,[x.w],{ngStyle:[0,"ngStyle"]},null),e.Qb(26,{"flex-basis":0}),(l()(),e.Cb(27,0,null,null,3,"div",[["class","serious"]],null,null,null,null,null)),e.Sb(512,null,x.w,x.x,[e.p,e.y,e.L]),e.Bb(29,278528,null,0,x.o,[x.w],{ngStyle:[0,"ngStyle"]},null),e.Qb(30,{"flex-basis":0}),(l()(),e.Cb(31,0,null,null,3,"div",[["class","severe"]],null,null,null,null,null)),e.Sb(512,null,x.w,x.x,[e.p,e.y,e.L]),e.Bb(33,278528,null,0,x.o,[x.w],{ngStyle:[0,"ngStyle"]},null),e.Qb(34,{"flex-basis":0}),(l()(),e.Cb(35,0,null,null,24,"div",[["class","percent-text"]],null,null,null,null,null)),(l()(),e.Cb(36,0,null,null,5,"div",[["class","percent-text-cell"]],null,null,null,null,null)),(l()(),e.Cb(37,0,null,null,2,"p",[["class","level-text straight-up-text"]],null,null,null,null,null)),(l()(),e.Vb(38,null,["",""])),e.Pb(131072,h.j,[h.k,e.j]),(l()(),e.Cb(40,0,null,null,1,"p",[["class","level-text"]],null,null,null,null,null)),(l()(),e.Vb(41,null,["","%"])),(l()(),e.Cb(42,0,null,null,5,"div",[["class","percent-text-cell"]],null,null,null,null,null)),(l()(),e.Cb(43,0,null,null,2,"p",[["class","level-text slight-text"]],null,null,null,null,null)),(l()(),e.Vb(44,null,["",""])),e.Pb(131072,h.j,[h.k,e.j]),(l()(),e.Cb(46,0,null,null,1,"p",[["class","level-text"]],null,null,null,null,null)),(l()(),e.Vb(47,null,["","%"])),(l()(),e.Cb(48,0,null,null,5,"div",[["class","percent-text-cell"]],null,null,null,null,null)),(l()(),e.Cb(49,0,null,null,2,"p",[["class","level-text serious-text"]],null,null,null,null,null)),(l()(),e.Vb(50,null,["",""])),e.Pb(131072,h.j,[h.k,e.j]),(l()(),e.Cb(52,0,null,null,1,"p",[["class","level-text"]],null,null,null,null,null)),(l()(),e.Vb(53,null,["","%"])),(l()(),e.Cb(54,0,null,null,5,"div",[["class","percent-text-cell"]],null,null,null,null,null)),(l()(),e.Cb(55,0,null,null,2,"p",[["class","level-text severe-text"]],null,null,null,null,null)),(l()(),e.Vb(56,null,["",""])),e.Pb(131072,h.j,[h.k,e.j]),(l()(),e.Cb(58,0,null,null,1,"p",[["class","level-text"]],null,null,null,null,null)),(l()(),e.Vb(59,null,["","%"]))],(function(l,n){var t=l(n,22,0,n.context.$implicit.normalPercent+"%");l(n,21,0,t);var e=l(n,26,0,n.context.$implicit.slightPercent+"%");l(n,25,0,e);var o=l(n,30,0,n.context.$implicit.seriousPercent+"%");l(n,29,0,o);var i=l(n,34,0,n.context.$implicit.severePercent+"%");l(n,33,0,i)}),(function(l,n){var t=n.component;l(n,6,0,n.context.$implicit.date),l(n,9,0,n.context.$implicit.time);var o=0==n.context.$implicit.elapsedHH?"":e.Wb(n,12,0,l(n,13,0,e.Ob(n.parent,0),n.context.$implicit.elapsedHH,"1.0-0"))+t.hourText+" ",i=e.Wb(n,12,1,l(n,14,0,e.Ob(n.parent,0),n.context.$implicit.elapsedmm,"1.0-0")),u=e.Wb(n,12,2,e.Ob(n,15).transform("posture-history.m")),s=e.Wb(n,12,3,l(n,16,0,e.Ob(n.parent,0),n.context.$implicit.elapsedss,"1.0-0"));l(n,12,0,o,i,u,s,e.Wb(n,12,4,e.Ob(n,17).transform("posture-history.s"))),l(n,38,0,e.Wb(n,38,0,e.Ob(n,39).transform("monitoring.straight-up"))),l(n,41,0,n.context.$implicit.normalPercent),l(n,44,0,e.Wb(n,44,0,e.Ob(n,45).transform("monitoring.slight"))),l(n,47,0,n.context.$implicit.slightPercent),l(n,50,0,e.Wb(n,50,0,e.Ob(n,51).transform("monitoring.serious"))),l(n,53,0,n.context.$implicit.seriousPercent),l(n,56,0,e.Wb(n,56,0,e.Ob(n,57).transform("monitoring.severe"))),l(n,59,0,n.context.$implicit.severePercent)}))}function f(l){return e.Xb(0,[e.Pb(0,x.e,[e.z]),e.Tb(671088640,1,{virtualScroll:0}),e.Tb(671088640,2,{infiniteScroll:0}),(l()(),e.Cb(3,0,null,null,12,"ion-header",[],null,null,null,p.Q,p.i)),e.Bb(4,49152,null,0,u.D,[e.j,e.p,e.F],null,null),(l()(),e.Cb(5,0,null,0,10,"ion-toolbar",[["class","settings-header-background"],["mode","ios"]],null,null,null,p.ob,p.G)),e.Bb(6,49152,null,0,u.Db,[e.j,e.p,e.F],{mode:[0,"mode"]},null),(l()(),e.Cb(7,0,null,0,4,"ion-buttons",[["slot","start"]],null,null,null,p.L,p.d)),e.Bb(8,49152,null,0,u.n,[e.j,e.p,e.F],null,null),(l()(),e.Cb(9,0,null,0,2,"ion-back-button",[["class","settings-back-button"],["text",""]],null,[[null,"click"]],(function(l,n,t){var o=!0;return"click"===n&&(o=!1!==e.Ob(l,11).onClick(t)&&o),o}),p.J,p.b)),e.Bb(10,49152,null,0,u.i,[e.j,e.p,e.F],{text:[0,"text"]},null),e.Bb(11,16384,null,0,u.j,[[2,u.jb],u.Jb],null,null),(l()(),e.Cb(12,0,null,0,3,"ion-title",[["class","settings-header-title"]],null,null,null,p.mb,p.E)),e.Bb(13,49152,null,0,u.Bb,[e.j,e.p,e.F],null,null),(l()(),e.Vb(14,0,["",""])),e.Pb(131072,h.j,[h.k,e.j]),(l()(),e.Cb(16,0,null,null,16,"ion-content",[["class","settings-background"]],null,null,null,p.O,p.g)),e.Bb(17,49152,null,0,u.w,[e.j,e.p,e.F],null,null),(l()(),e.Cb(18,0,null,0,14,"div",[["class","container"]],null,null,null,null,null)),(l()(),e.Cb(19,0,null,null,2,"div",[["class","total-activities"]],null,null,null,null,null)),(l()(),e.Vb(20,null,[" ",""," "])),e.Pb(131072,h.j,[h.k,e.j]),(l()(),e.Cb(22,0,null,null,6,"ion-virtual-scroll",[["approxItemHeight","320px"]],null,null,null,p.pb,p.H)),e.Bb(23,835584,[[1,4],["virtualScroll",4]],3,u.Eb,[e.F,e.x,e.p],{approxItemHeight:[0,"approxItemHeight"],items:[1,"items"]},null),e.Tb(335544320,3,{itmTmp:0}),e.Tb(335544320,4,{hdrTmp:0}),e.Tb(335544320,5,{ftrTmp:0}),(l()(),e.rb(16777216,null,0,1,null,v)),e.Bb(28,16384,[[3,4]],0,u.Rb,[e.T,e.X],null,null),(l()(),e.Cb(29,0,null,null,3,"ion-infinite-scroll",[["threshold","100px"]],null,[[null,"ionInfinite"]],(function(l,n,t){var e=!0;return"ionInfinite"===n&&(e=!1!==l.component.loadMore(t)&&e),e}),p.U,p.l)),e.Bb(30,49152,[[2,4],["infiniteScroll",4]],0,u.G,[e.j,e.p,e.F],{threshold:[0,"threshold"]},null),(l()(),e.Cb(31,0,null,0,1,"ion-infinite-scroll-content",[["loadingSpinner","bubbles"]],null,null,null,p.T,p.m)),e.Bb(32,49152,null,0,u.H,[e.j,e.p,e.F],{loadingSpinner:[0,"loadingSpinner"]},null)],(function(l,n){var t=n.component;l(n,6,0,"ios"),l(n,10,0,""),l(n,23,0,"320px",t.recordList),l(n,30,0,"100px"),l(n,32,0,"bubbles")}),(function(l,n){var t=n.component;l(n,14,0,e.Wb(n,14,0,e.Ob(n,15).transform("posture-history.title"))),l(n,20,0,e.Wb(n,20,0,e.Ob(n,21).transform("posture-history.records")),t.totalPostureCount)}))}function C(l){return e.Xb(0,[(l()(),e.Cb(0,0,null,null,1,"app-posture-history",[],null,null,null,f,m)),e.Bb(1,114688,null,0,a,[e.F,g.a,g.m,i.c,h.k,r.a,u.Jb],null,null)],(function(l,n){l(n,1,0)}),null)}var M=e.yb("app-posture-history",a,C,{},{},[]),k=t("s7LF");t.d(n,"PostureHistoryPageModuleNgFactory",(function(){return y}));var y=e.zb(b,[],(function(l){return e.Lb([e.Mb(512,e.m,e.kb,[[8,[d.a,M]],[3,e.m],e.D]),e.Mb(4608,x.n,x.m,[e.z,[2,x.z]]),e.Mb(4608,k.j,k.j,[]),e.Mb(4608,u.c,u.c,[e.F,e.g]),e.Mb(4608,u.Ib,u.Ib,[u.c,e.m,e.w]),e.Mb(4608,u.Nb,u.Nb,[u.c,e.m,e.w]),e.Mb(4608,h.g,h.f,[]),e.Mb(4608,h.c,h.e,[]),e.Mb(4608,h.i,h.d,[]),e.Mb(4608,h.b,h.a,[]),e.Mb(4608,h.k,h.k,[h.l,h.g,h.c,h.i,h.b,h.m,h.n]),e.Mb(1073742336,x.b,x.b,[]),e.Mb(1073742336,k.i,k.i,[]),e.Mb(1073742336,k.b,k.b,[]),e.Mb(1073742336,u.Fb,u.Fb,[]),e.Mb(1073742336,g.o,g.o,[[2,g.t],[2,g.m]]),e.Mb(1073742336,h.h,h.h,[]),e.Mb(1073742336,b,b,[]),e.Mb(1024,g.k,(function(){return[[{path:"",component:a}]]}),[]),e.Mb(256,h.n,void 0,[]),e.Mb(256,h.m,void 0,[])])}))}}]);