(window.webpackJsonp=window.webpackJsonp||[]).push([[75],{"9nBQ":function(n,l,t){"use strict";t.r(l);var s=t("8Y7J"),o=t("mrSG"),a=t("4SHv"),e=t("9B/o"),i=t("OUMn");class r{constructor(n,l,t,s,e){this.zone=n,this.strava=l,this.iab=t,this.popupCtrl=s,this.translate=e,this.isStravaAuthorized=!1,this.onClickConnectStravaBtn=()=>{const n=this.strava.getAuthorizeURL(),l=this.iab.create(n,"_blank","location=no,zoom=no,usewkwebview=yes,toolbarcolor=#212629,closebuttoncolor=#fc4c02,hidenavigationbuttons=yes,hardwareback=no"),t=l.on("loadstart").subscribe(n=>o.b(this,void 0,void 0,(function*(){let s=null;try{const o=yield this.strava.getAuthorizationCode(n.url);""!=o&&(t.unsubscribe(),l.close(),s=yield this.popupCtrl.presentLoadingController({spinner:"bubbles",translucent:!0}),yield this.strava.getAccessToken(o),yield s.dismiss(),this.zone.run(()=>{this.isStravaAuthorized=this.strava.isAuthorized()}))}catch(o){let n;null!=s&&s.dismiss(),t.unsubscribe(),l.close(),n=o==a.b.ErrAccessDenied?this.translate.instant("strava.access-denied-error"):o==a.b.ErrAuth?this.translate.instant("strava.auth-error"):o==a.b.ErrUnauthorizedScope?this.translate.instant("strava.unauthorized-scope-error"):o==a.b.ErrInvalidGetTokenResponse?this.translate.instant("strava.invalid-get-token-response"):o==a.b.ErrInvalidRefreshTokenResponse?this.translate.instant("strava.invalid-refresh-token-response"):this.translate.instant("strava.unknown-error",{value:o}),this.popupCtrl.presentAlertController({header:this.translate.instant("strava.connect-error"),message:n,buttons:[{text:this.translate.instant("global.okay")}]},!0)}})))},this.onClickDisconnectStravaBtn=()=>o.b(this,void 0,void 0,(function*(){let n=null;try{n=yield this.popupCtrl.presentLoadingController({spinner:"bubbles",translucent:!0}),yield this.strava.deauthorize(),yield n.dismiss(),this.isStravaAuthorized=this.strava.isAuthorized()}catch(l){console.log(l),null!=n&&n.dismiss()}}))}ngOnInit(){}ionViewWillEnter(){this.isStravaAuthorized=this.strava.isAuthorized()}}class u{}var b=t("pMnS"),c=t("TSSN"),d=t("oBZk"),v=t("ZZ/e"),h=t("SVse"),p=s.Ab({encapsulation:0,styles:[[".strava-body[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-pack:start;justify-content:flex-start;-webkit-box-align:center;align-items:center;width:100%;height:100%}.statement[_ngcontent-%COMP%]{color:var(--solos-color-a);width:90%;white-space:pre-line}.strava-logo[_ngcontent-%COMP%]{font-size:200px}.strava-footer[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;background:var(--solos-color-b)}.connect-strava-btn[_ngcontent-%COMP%]{width:200px;margin-bottom:calc(env(safe-area-inset-bottom) + 10px)}.disconnect-strava-btn[_ngcontent-%COMP%]{width:80%;margin-bottom:calc(env(safe-area-inset-bottom) + 10px)}"]],data:{}});function g(n){return s.Xb(0,[(n()(),s.Cb(0,0,null,null,2,"div",[["class","statement"]],null,null,null,null,null)),(n()(),s.Vb(1,null,["",""])),s.Pb(131072,c.j,[c.k,s.j])],null,(function(n,l){n(l,1,0,s.Wb(l,1,0,s.Ob(l,2).transform("strava.disconnect-strava-statement")))}))}function f(n){return s.Xb(0,[(n()(),s.Cb(0,0,null,null,2,"div",[["class","statement"]],null,null,null,null,null)),(n()(),s.Vb(1,null,["",""])),s.Pb(131072,c.j,[c.k,s.j])],null,(function(n,l){n(l,1,0,s.Wb(l,1,0,s.Ob(l,2).transform("strava.connect-strava-statement")))}))}function k(n){return s.Xb(0,[(n()(),s.Cb(0,0,null,null,3,"ion-button",[["class","disconnect-strava-btn"],["color","solos-color-d"],["shape","round"]],null,[[null,"click"]],(function(n,l,t){var s=!0;return"click"===l&&(s=!1!==n.component.onClickDisconnectStravaBtn()&&s),s}),d.K,d.c)),s.Bb(1,49152,null,0,v.m,[s.j,s.p,s.F],{color:[0,"color"],shape:[1,"shape"]},null),(n()(),s.Vb(2,0,["",""])),s.Pb(131072,c.j,[c.k,s.j])],(function(n,l){n(l,1,0,"solos-color-d","round")}),(function(n,l){n(l,2,0,s.Wb(l,2,0,s.Ob(l,3).transform("strava.disconnect")))}))}function m(n){return s.Xb(0,[(n()(),s.Cb(0,0,null,null,1,"ion-img",[["class","connect-strava-btn"],["src","assets/imgs/btn_strava_connectwith_orange.svg"]],null,[[null,"click"]],(function(n,l,t){var s=!0;return"click"===l&&(s=!1!==n.component.onClickConnectStravaBtn()&&s),s}),d.S,d.k)),s.Bb(1,49152,null,0,v.F,[s.j,s.p,s.F],{src:[0,"src"]},null)],(function(n,l){n(l,1,0,"assets/imgs/btn_strava_connectwith_orange.svg")}),null)}function C(n){return s.Xb(0,[(n()(),s.Cb(0,0,null,null,12,"ion-header",[],null,null,null,d.Q,d.i)),s.Bb(1,49152,null,0,v.D,[s.j,s.p,s.F],null,null),(n()(),s.Cb(2,0,null,0,10,"ion-toolbar",[["class","settings-header-background"],["mode","ios"]],null,null,null,d.ob,d.G)),s.Bb(3,49152,null,0,v.Db,[s.j,s.p,s.F],{mode:[0,"mode"]},null),(n()(),s.Cb(4,0,null,0,4,"ion-buttons",[["slot","start"]],null,null,null,d.L,d.d)),s.Bb(5,49152,null,0,v.n,[s.j,s.p,s.F],null,null),(n()(),s.Cb(6,0,null,0,2,"ion-back-button",[["class","settings-back-button"],["text",""]],null,[[null,"click"]],(function(n,l,t){var o=!0;return"click"===l&&(o=!1!==s.Ob(n,8).onClick(t)&&o),o}),d.J,d.b)),s.Bb(7,49152,null,0,v.i,[s.j,s.p,s.F],{text:[0,"text"]},null),s.Bb(8,16384,null,0,v.j,[[2,v.jb],v.Jb],null,null),(n()(),s.Cb(9,0,null,0,3,"ion-title",[["class","settings-header-title"]],null,null,null,d.mb,d.E)),s.Bb(10,49152,null,0,v.Bb,[s.j,s.p,s.F],null,null),(n()(),s.Vb(11,0,["",""])),s.Pb(131072,c.j,[c.k,s.j]),(n()(),s.Cb(13,0,null,null,8,"ion-content",[["class","settings-background ion-padding-top"]],null,null,null,d.O,d.g)),s.Bb(14,49152,null,0,v.w,[s.j,s.p,s.F],null,null),(n()(),s.Cb(15,0,null,0,6,"div",[["class","strava-body"]],null,null,null,null,null)),(n()(),s.Cb(16,0,null,null,1,"ion-img",[["class","strava-logo"],["src","assets/imgs/strava-logo-orange.png"]],null,null,null,d.S,d.k)),s.Bb(17,49152,null,0,v.F,[s.j,s.p,s.F],{src:[0,"src"]},null),(n()(),s.rb(16777216,null,null,1,null,g)),s.Bb(19,16384,null,0,h.l,[s.X,s.T],{ngIf:[0,"ngIf"]},null),(n()(),s.rb(16777216,null,null,1,null,f)),s.Bb(21,16384,null,0,h.l,[s.X,s.T],{ngIf:[0,"ngIf"]},null),(n()(),s.Cb(22,0,null,null,6,"ion-footer",[],null,null,null,d.P,d.h)),s.Bb(23,49152,null,0,v.B,[s.j,s.p,s.F],null,null),(n()(),s.Cb(24,0,null,0,4,"div",[["class","strava-footer"]],null,null,null,null,null)),(n()(),s.rb(16777216,null,null,1,null,k)),s.Bb(26,16384,null,0,h.l,[s.X,s.T],{ngIf:[0,"ngIf"]},null),(n()(),s.rb(16777216,null,null,1,null,m)),s.Bb(28,16384,null,0,h.l,[s.X,s.T],{ngIf:[0,"ngIf"]},null)],(function(n,l){var t=l.component;n(l,3,0,"ios"),n(l,7,0,""),n(l,17,0,"assets/imgs/strava-logo-orange.png"),n(l,19,0,t.isStravaAuthorized),n(l,21,0,!t.isStravaAuthorized),n(l,26,0,t.isStravaAuthorized),n(l,28,0,!t.isStravaAuthorized)}),(function(n,l){n(l,11,0,s.Wb(l,11,0,s.Ob(l,12).transform("strava.strava")))}))}function w(n){return s.Xb(0,[(n()(),s.Cb(0,0,null,null,1,"app-strava-authorization",[],null,null,null,C,p)),s.Bb(1,114688,null,0,r,[s.F,a.c,e.a,i.a,c.k],null,null)],(function(n,l){n(l,1,0)}),null)}var M=s.yb("app-strava-authorization",r,w,{},{},[]),z=t("s7LF"),B=t("iInd");t.d(l,"StravaAuthorizationPageModuleNgFactory",(function(){return j}));var j=s.zb(u,[],(function(n){return s.Lb([s.Mb(512,s.m,s.kb,[[8,[b.a,M]],[3,s.m],s.D]),s.Mb(4608,h.n,h.m,[s.z,[2,h.z]]),s.Mb(4608,z.j,z.j,[]),s.Mb(4608,v.c,v.c,[s.F,s.g]),s.Mb(4608,v.Ib,v.Ib,[v.c,s.m,s.w]),s.Mb(4608,v.Nb,v.Nb,[v.c,s.m,s.w]),s.Mb(4608,c.g,c.f,[]),s.Mb(4608,c.c,c.e,[]),s.Mb(4608,c.i,c.d,[]),s.Mb(4608,c.b,c.a,[]),s.Mb(4608,c.k,c.k,[c.l,c.g,c.c,c.i,c.b,c.m,c.n]),s.Mb(1073742336,h.b,h.b,[]),s.Mb(1073742336,z.i,z.i,[]),s.Mb(1073742336,z.b,z.b,[]),s.Mb(1073742336,v.Fb,v.Fb,[]),s.Mb(1073742336,c.h,c.h,[]),s.Mb(1073742336,B.o,B.o,[[2,B.t],[2,B.m]]),s.Mb(1073742336,u,u,[]),s.Mb(256,c.n,void 0,[]),s.Mb(256,c.m,void 0,[]),s.Mb(1024,B.k,(function(){return[[{path:"",component:r}]]}),[])])}))}}]);